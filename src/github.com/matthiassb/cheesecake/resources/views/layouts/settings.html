<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>CheeseCake</title>

    <!-- Bootstrap Core CSS - Uses Bootswatch Flatly Theme: http://bootswatch.com/flatly/ -->
    <link href="/assets/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="/assets/css/freelancer.css" rel="stylesheet">
    <link href="/assets/css/bootstrap-switch.css" rel="stylesheet">
    <link href="/assets/css/sweetalert.css" rel="stylesheet">
    <!-- Custom Fonts -->
    <link href="/assets/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="http://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
    <link href="http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body id="page-top" class="index">
  <div id="fakeLoader" style="position: fixed; width: 100%; height: 100%; top: 0px; left: 0px; z-index: 999999; display: none; background-color: rgb(46, 204, 113);">
    <div class="fl spinner7" style="position: absolute; left: 666.5px; top: 172px;">
      <div class="circ1"></div>

      <div class="circ2"></div>

      <div class="circ3"></div>

      <div class="circ4"></div>
    </div>
  </div>
    <!-- Navigation -->
    <nav class="navbar navbar-default navbar-fixed-top navbar-shrink">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="/">
                  <img src="/assets/img/logo.png" style="margin-top: -15px; float: left; width:48px;">
                  <span style="float: left; margin-left: 10px;">CheeseCake</span>
                </a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                    <li class="hidden">
                        <a href="#page-top"></a>
                    </li>
                    <li class="active">
                        <a href="/libraries">Libraries</a>
                    </li>
                    <li class="page-scroll">
                        <a href="/add-media">Add Media</a>
                    </li>
                    <li class="page-scroll">
                        <a href="/manage-media">Manage Media</a>
                    </li>
                    <li class="page-scroll">
                        <a href="/settings">Settings</a>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container-fluid -->
    </nav>


  <!-- Portfolio Grid Section -->
  <section class="flex-1">
    <div class="container">
      <form name="settingsForm" id="settingsForm" action="/api/settings" method="POST">
        <h3>General Config</h3>
        <div class="row control-group">
          <div class="form-group col-xs-12 controls">
            <label>Password Protected &nbsp;</label>
            <input type="checkbox" name="isPasswordProtected" data-size="small">
          </div>
          <div id="usernameGroup" class="form-group col-xs-12 controls" style="display:none;">
            <label>Username</label>
            <input type="text" class="form-control" placeholder="" name="username">
          </div>
          <div id="passwordGroup" class="form-group col-xs-12 controls" style="display:none;">
            <label>Password</label>
            <input type="text" class="form-control" placeholder="" name="password">
          </div>
        </div>
        <div class="row control-group">
          <div class="form-group col-xs-12 controls">
            <label>Data Directory</label>
            <input type="text" class="form-control" placeholder="{{ this.dataDir }}" name="dataDir">
          </div>
        </div>
        <div class="row control-group">
          <div class="form-group col-xs-12 controls">
            <label>Download Directory</label>
            <input type="text" class="form-control" placeholder="{{ this.downloadDir }}" name="downloadDir">
          </div>
        </div>
        <h3>Usenet Config</h3>
        <div class="row control-group">
          <div class="form-group col-xs-12 controls">
            <label>Usenet Server</label>
            <input type="text" class="form-control" placeholder="{{ this.usenetServer }}" name="usenetServer">
          </div>
        </div>
        <div class="row control-group">
          <div class="form-group col-xs-12 controls">
            <label>Usenet Port</label>
            <input type="text" class="form-control" placeholder="{{ this.usenetPort }}" name="usenetPort">
          </div>
        </div>
        <div class="row control-group">
          <div class="form-group col-xs-12 controls">
            <label>Usenet Username</label>
            <input type="text" class="form-control" placeholder="{{ this.usenetUsername }}" name="usenetUsername">
          </div>
        </div>
        <div class="row control-group">
          <div class="form-group col-xs-12 controls">
            <label>Usenet Password</label>
            <input type="password" class="form-control" placeholder="{{#if this.usenetUsername}} ***** {{/if}}" name="usenetPassword">
          </div>
        </div>
        <div class="row control-group">
          <div class="form-group col-xs-12 controls">
            <label>Usenet Connections</label>
            <input type="text" class="form-control" placeholder="{{ this.usenetConnections }}" name="usenetConnections">
          </div>
          <div class="form-group col-xs-12 controls">
            <label>SSL &nbsp;</label>
            <input type="checkbox" name="isUsenetSSL" data-size="small" {{#if this.isUsenetSSL}} checked {{/if}}>
          </div>
        </div>
        <h3>Indexers</h3>
        <div class="row control-group">
          <div class="form-group col-xs-6 controls">
            <label>Site</label>
            <input type="text" class="form-control" name="indexerSite" placeholder="{{ indexerSite }}">
          </div>
          <div class="form-group col-xs-6 controls">
            <label>API Key</label>
            <input type="text" class="form-control" name="indexerKey" placeholder="{{ indexerKey }}">
          </div>
        </div>
        <div class="form-group col-xs-12">
          <button type="submit" class="btn btn-success btn-lg " style="float:right">Save</button>
        </div>
      </form>
    </div>
  </section>


  <!-- Footer -->
  <footer id="footer" class="text-center ">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                Copyright &copy; Matthias Brooks
            </div>
        </div>
    </div>
  </footer>

  <!-- Scroll to Top Button (Only visible on small and extra-small screen sizes) -->
  <div class="scroll-top page-scroll visible-xs visible-sm">
      <a class="btn btn-primary" href="#page-top">
          <i class="fa fa-chevron-up"></i>
      </a>
  </div>

  <!-- jQuery -->
  <script src="/assets/js/jquery.js"></script>

  <!-- Bootstrap Core JavaScript -->
  <script src="/assets/js/bootstrap.min.js"></script>

  <!-- Plugin JavaScript -->
  <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js"></script>
  <script src="/assets/js/classie.js"></script>

  <!-- Custom Theme JavaScript -->
  <script src="/assets/js/freelancer.js"></script>
  <script src="/assets/js/bootstrap-switch.js"></script>
  <script src="/assets/js/sweetalert.min.js"></script>

<script>
  $(document).ready(function(){
    $("[name='isPasswordProtected']").bootstrapSwitch();
    $("[name='isUsenetSSL']").bootstrapSwitch();
    $("[name='isPasswordProtected']").on('switchChange.bootstrapSwitch', function(event, state) {
      console.log(state)
      if(state == true){
        $("#usernameGroup").slideDown();
        $("#passwordGroup").slideDown();
      } else {
        $("#usernameGroup").slideUp();
        $("#passwordGroup").slideUp();
      }
    });

    $("#settingsForm").submit(function(e){
      e.preventDefault();
      $("#fakeLoader").fadeIn();
      console.log($(this).serialize())
      $.post("/api/settings", $(this).serialize(), function(data){
        $.get("/api/settings", function(data){
          for(var prop in data.config){
            if(typeof data.config[prop] === "string"){
              if($("[name='"+ prop + "']").attr("type") == "password"){
                $("[name='"+ prop + "']").attr("placeholder", "*****");
              } else {
                $("[name='"+ prop + "']").attr("placeholder", data.config[prop]).val("").focus().blur();
              }
            } else if(typeof data.config[prop] === "boolean"){
              $("[name='"+ prop + "']").bootstrapSwitch('state', data.config[prop]);
            }
          }
          swal("Config Saved", "", "success");
          $("#fakeLoader").fadeOut();
        });


      });
    });
  });
</script>
</body>

</html>
